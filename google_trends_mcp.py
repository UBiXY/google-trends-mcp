{"content": "ZnJvbSBweXRyZW5kcy5yZXF1ZXN0IGltcG9ydCBUcmVuZFJlcQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIE9wdGlvbmFsLCBVbmlvbgppbXBvcnQgbG9nZ2luZwoKY2xhc3MgR29vZ2xlVHJlbmRzTUNQOgogICAgIiIiTWFya2V0IENvbnN0cmFpbnQgUGFyYW1ldGVycyAoTUNQKSBpbXBsZW1lbnRhdGlvbiBmb3IgR29vZ2xlIFRyZW5kcyBkYXRhIHJldHJpZXZhbCIiIgogICAgCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICByZWdpb246IHN0ciA9ICJVUyIsCiAgICAgICAgdGltZWZyYW1lOiBzdHIgPSAidG9kYXkgMTItbSIsCiAgICAgICAgY2F0ZWdvcnk6IGludCA9IDAsCiAgICAgICAgaGw6IHN0ciA9ICJlbi1VUyIsCiAgICAgICAgdGltZXpvbmU6IGludCA9IDI0MAogICAgKToKICAgICAgICBzZWxmLnB5dHJlbmRzID0gVHJlbmRSZXEoaGw9aGwsIHR6PXRpbWV6b25lKQogICAgICAgIHNlbGYucmVnaW9uID0gcmVnaW9uCiAgICAgICAgc2VsZi50aW1lZnJhbWUgPSB0aW1lZnJhbWUKICAgICAgICBzZWxmLmNhdGVnb3J5ID0gY2F0ZWdvcnkKICAgICAgICBzZWxmLmxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQogICAgICAgIAogICAgZGVmIGJ1aWxkX3BheWxvYWQoc2VsZiwga2V5d29yZHM6IExpc3Rbc3RyXSkgLT4gTm9uZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucHl0cmVuZHMuYnVpbGRfcGF5bG9hZCgKICAgICAgICAgICAgICAgIGt3X2xpc3Q9a2V5d29yZHMsCiAgICAgICAgICAgICAgICBjYXQ9c2VsZi5jYXRlZ29yeSwKICAgICAgICAgICAgICAgIHRpbWVmcmFtZT1zZWxmLnRpbWVmcmFtZSwKICAgICAgICAgICAgICAgIGdlbz1zZWxmLnJlZ2lvbgogICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmxvZ2dlci5lcnJvcihmIkVycm9yIGJ1aWxkaW5nIHBheWxvYWQ6IHtzdHIoZSl9IikKICAgICAgICAgICAgcmFpc2UKICAgIAogICAgZGVmIGdldF9pbnRlcmVzdF9vdmVyX3RpbWUoCiAgICAgICAgc2VsZiwKICAgICAgICBrZXl3b3JkczogTGlzdFtzdHJdLAogICAgICAgIG5vcm1hbGl6ZTogYm9vbCA9IFRydWUKICAgICkgLT4gcGQuRGF0YUZyYW1lOgogICAgICAgIHNlbGYuYnVpbGRfcGF5bG9hZChrZXl3b3JkcykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRmID0gc2VsZi5weXRyZW5kcy5pbnRlcmVzdF9vdmVyX3RpbWUoKQogICAgICAgICAgICBpZiBub3JtYWxpemUgYW5kIG5vdCBkZi5lbXB0eToKICAgICAgICAgICAgICAgIGRmID0gZGYuYXBwbHkobGFtYmRhIHg6ICh4IC0geC5taW4oKSkgLyAoeC5tYXgoKSAtIHgubWluKCkpICogMTAwKQogICAgICAgICAgICByZXR1cm4gZGYKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKGYiRXJyb3IgZ2V0dGluZyBpbnRlcmVzdCBvdmVyIHRpbWU6IHtzdHIoZSl9IikKICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgCiAgICBkZWYgZ2V0X3JlbGF0ZWRfcXVlcmllcygKICAgICAgICBzZWxmLAogICAgICAgIGtleXdvcmRzOiBMaXN0W3N0cl0KICAgICkgLT4gRGljdFtzdHIsIERpY3Rbc3RyLCBwZC5EYXRhRnJhbWVdXToKICAgICAgICBzZWxmLmJ1aWxkX3BheWxvYWQoa2V5d29yZHMpCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5weXRyZW5kcy5yZWxhdGVkX3F1ZXJpZXMoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoZiJFcnJvciBnZXR0aW5nIHJlbGF0ZWQgcXVlcmllczoge3N0cihlKX0iKQogICAgICAgICAgICByYWlzZQogICAgICAgICAgICAKICAgIGRlZiBnZXRfcmVnaW9uYWxfaW50ZXJlc3QoCiAgICAgICAgc2VsZiwKICAgICAgICBrZXl3b3JkczogTGlzdFtzdHJdLAogICAgICAgIHJlc29sdXRpb246IHN0ciA9ICdDT1VOVFJZJwogICAgKSAtPiBwZC5EYXRhRnJhbWU6CiAgICAgICAgc2VsZi5idWlsZF9wYXlsb2FkKGtleXdvcmRzKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYucHl0cmVuZHMuaW50ZXJlc3RfYnlfcmVnaW9uKHJlc29sdXRpb249cmVzb2x1dGlvbikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKGYiRXJyb3IgZ2V0dGluZyByZWdpb25hbCBpbnRlcmVzdDoge3N0cihlKX0iKQogICAgICAgICAgICByYWlzZQ==", "encoding": "base64"}